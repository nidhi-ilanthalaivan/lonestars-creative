<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Inside Me - Memory Core</title>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Nunito:wght@600;800&display=swap" rel="stylesheet">
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* --- STARRY BACKGROUND --- */
        body {
            font-family: 'Nunito', sans-serif;
            overflow: hidden;
            background: radial-gradient(circle at bottom center, #2b1055 0%, #1a0b2e 40%, #000000 100%);
            height: 100vh;
        }
        .stars, .stars2 {
            position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            animation: twinkle 5s ease-in-out infinite alternate;
        }
        .stars { background-image: radial-gradient(2px 2px at 20px 30px, #eee, transparent), radial-gradient(2px 2px at 40px 70px, #fff, transparent), radial-gradient(2px 2px at 50px 160px, #ddd, transparent), radial-gradient(2px 2px at 90px 40px, #fff, transparent), radial-gradient(2px 2px at 130px 80px, #fff, transparent), radial-gradient(2px 2px at 160px 120px, #ddd, transparent); background-size: 200px 200px; opacity: 0.5; }
        .stars2 { background-image: radial-gradient(3px 3px at 50px 50px, #f1c40f, transparent), radial-gradient(3px 3px at 100px 100px, #3498db, transparent), radial-gradient(3px 3px at 150px 50px, #e74c3c, transparent); background-size: 250px 250px; opacity: 0.3; animation-duration: 8s; }
        @keyframes twinkle { 0% { opacity: 0.3; transform: scale(1); } 100% { opacity: 0.5; transform: scale(1.05); } }

        /* --- UPDATED LOGO (Smaller and Higher) --- */
        .logo-container {
            position: absolute;
            top: 2%; /* Moved higher */
            left: 50%;
            transform: translateX(-50%) rotate(-2deg);
            z-index: 10;
            text-align: center;
            pointer-events: none;
        }
        
        .logo-text {
            font-family: 'Fredoka One', cursive;
            font-size: 4rem; /* Made smaller */
            line-height: 0.9;
            text-transform: uppercase;
            color: white;
            -webkit-text-stroke: 3px #004e92; /* Thinner outline */
            text-shadow: 
                3px 3px 0px #004e92,
                6px 6px 0px #00000050,
                0px 0px 20px rgba(255, 255, 255, 0.5);
        }
        
        .logo-sub {
            display: block;
            font-size: 3.5rem; /* Made smaller */
            color: #ffd700;
            -webkit-text-stroke: 2px #d35400;
             text-shadow: 
                2px 2px 0px #d35400,
                4px 4px 0px #00000050;
            margin-top: -5px;
        }

        #canvas-container { width: 100vw; height: 100vh; position: relative; z-index: 1; }

        /* --- UI PANEL --- */
        #info-panel {
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0.9);
            width: 380px;
            background: rgba(40, 40, 60, 0.85);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border: 2px solid rgba(255, 255, 255, 0.3);
            border-radius: 30px; padding: 40px 30px;
            z-index: 100; opacity: 0; pointer-events: none;
            transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.27);
            color: white; box-shadow: 0 30px 60px -10px rgba(0, 0, 0, 0.8);
            text-align: center;
        }
        #info-panel.active { transform: translate(-50%, -50%) scale(1); opacity: 1; pointer-events: auto; }
        .character-portrait {
            width: 100px; height: 100px; margin: 0 auto 20px auto;
            border-radius: 50%; background: radial-gradient(circle at 30% 30%, rgba(255,255,255,0.9), rgba(255,255,255,0.1));
            border: 4px solid rgba(255,255,255,0.5);
            box-shadow: 0 0 20px currentColor; display: flex; justify-content: center; align-items: center;
            font-size: 60px; overflow: hidden; position: relative;
        }
        .character-img { width: 100%; height: 100%; object-fit: cover; }
        .close-btn { position: absolute; top: 15px; right: 20px; cursor: pointer; font-size: 28px; color: rgba(255,255,255,0.7); transition: 0.2s; font-family: 'Fredoka One', cursive; }
        .close-btn:hover { color: white; transform: scale(1.1); }
        .panel-title { font-family: 'Fredoka One', cursive; font-size: 36px; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0,0,0,0.3); text-transform: uppercase; }
        .panel-text { font-size: 18px; line-height: 1.5; font-weight: 700; }
        .instruction { position: absolute; bottom: 30px; width: 100%; text-align: center; color: rgba(255, 255, 255, 0.6); font-size: 14px; letter-spacing: 3px; font-weight: 800; text-transform: uppercase; animation: pulse 3s infinite; pointer-events: none; z-index: 5; text-shadow: 0 2px 4px rgba(0,0,0,0.5); }
        @keyframes pulse { 0%, 100% { opacity: 0.5; } 50% { opacity: 1; } }
    </style>
</head>
<body>

    <div class="stars"></div>
    <div class="stars2"></div>

    <div class="logo-container">
        <div class="logo-text">Inside <span class="logo-sub">ME</span></div>
    </div>

    <div id="canvas-container"></div>
    <div class="instruction">Select a Memory Orb</div>

    <div id="info-panel">
        <div class="close-btn">Ã—</div>
        <div class="character-portrait" id="char-portrait"></div>
        <div class="panel-title"></div>
        <div class="panel-text"></div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    
    <script>
        const container = document.getElementById('canvas-container');
        const scene = new THREE.Scene();
        scene.fog = new THREE.FogExp2(0x1a0b2e, 0.02);

        const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
        camera.position.set(0, 5, 18); // Moved back slightly more
        camera.lookAt(0, 2, 0);

        const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
        renderer.setSize(window.innerWidth, window.innerHeight);
        renderer.setPixelRatio(window.devicePixelRatio);
        renderer.toneMapping = THREE.ReinhardToneMapping;
        renderer.toneMappingExposure = 1.2;
        container.appendChild(renderer.domElement);

        // --- LIGHTING ---
        const ambientLight = new THREE.AmbientLight(0xffffff, 0.5); // Brighter ambient light
        scene.add(ambientLight);
        const spotLight = new THREE.SpotLight(0xffffff, 1);
        spotLight.position.set(0, 15, 0);
        scene.add(spotLight);

        // --- MATERIALS ---
        const consoleMaterial = new THREE.MeshPhysicalMaterial({
            color: 0xffffff, metalness: 0.1, roughness: 0.2, clearcoat: 0.8
        });

        // UPDATED ORB MATERIAL (More color, less transparent)
        const glassMaterialBase = new THREE.MeshPhysicalMaterial({
            metalness: 0.1,
            roughness: 0.2,
            transmission: 0.4, // More opaque
            thickness: 2,
            clearcoat: 1.0,
            transparent: true,
            opacity: 0.9, // Less transparent
            reflectivity: 0.5
        });

        // --- CONSOLE GEOMETRY ---
        const points = [
            new THREE.Vector2(1.8, 0), new THREE.Vector2(0.8, 2), new THREE.Vector2(0.8, 3),
            new THREE.Vector2(3.8, 4), new THREE.Vector2(3.8, 4.2), new THREE.Vector2(3.5, 4.2), new THREE.Vector2(3.5, 4.0)
        ];
        const stand = new THREE.Mesh(new THREE.LatheGeometry(points, 64), consoleMaterial);
        stand.position.y = -2.5; 
        scene.add(stand);

        const lid = new THREE.Mesh(new THREE.CylinderGeometry(3.8, 3.8, 0.2, 64), consoleMaterial);
        lid.position.y = 3.5;
        const centerPillar = new THREE.Mesh(
            new THREE.CylinderGeometry(0.8, 0.8, 2.5, 32),
            new THREE.MeshPhysicalMaterial({color: 0xffffff, transmission: 0.8, opacity: 0.6, transparent: true})
        );
        centerPillar.position.y = 2.5;
        scene.add(centerPillar);
        scene.add(lid);

        // --- MEMORY ORBS ---
        const orbs = [];
        const carouselGroup = new THREE.Group();
        carouselGroup.position.y = 2.4; 
        scene.add(carouselGroup);

        const memoryData = [
            { id: 'joy',     color: 0xFFD700, emoji: 'ðŸ˜Š', image: '', title: 'Joy', text: 'We need happy memories to keep the islands running!' },
            { id: 'sadness', color: 0x4A90E2, emoji: 'ðŸ˜¢', image: '', title: 'Sadness', text: 'Sometimes you just need a good cry to move forward.' },
            { id: 'anger',   color: 0xE74C3C, emoji: 'ðŸ˜ ', image: '', title: 'Anger', text: 'That is brave... but also completely reckless!' },
            { id: 'disgust', color: 0x7FD67F, emoji: 'ðŸ¤¢', image: '', title: 'Disgust', text: 'Ew. No. Absolutely not happening.' },
            { id: 'fear',    color: 0xB388FF, emoji: 'ðŸ˜¨', image: '', title: 'Fear', text: 'Did you check the safety checklists?!' }
        ];

        const radius = 2.5;
        const angleStep = (Math.PI * 2) / memoryData.length;

        memoryData.forEach((data, index) => {
            const angle = index * angleStep;
            const geometry = new THREE.SphereGeometry(0.7, 32, 32);
            const material = glassMaterialBase.clone();
            material.color.setHex(data.color);
            material.emissive.setHex(data.color);
            material.emissiveIntensity = 1.0; // Stronger glow

            const orb = new THREE.Mesh(geometry, material);
            orb.position.x = Math.cos(angle) * radius;
            orb.position.z = Math.sin(angle) * radius;
            
            const cloud = new THREE.Mesh(new THREE.SphereGeometry(0.4, 16, 16), new THREE.MeshBasicMaterial({ color: data.color, transparent: true, opacity: 0.8 }));
            orb.add(cloud);
            const orbLight = new THREE.PointLight(data.color, 2.0, 5); // Brighter light
            orb.add(orbLight);

            orb.userData = data;
            carouselGroup.add(orb);
            orbs.push(orb);
        });

        // Core Memory (Top)
        const coreData = { id: 'core', color: 0xFFD700, emoji: 'ðŸŒŸ', image: '', title: 'Core Memory', text: 'A super important memory that powers your personality!' };
        const coreMat = glassMaterialBase.clone();
        coreMat.color.setHex(coreData.color);
        coreMat.emissive.setHex(coreData.color);
        coreMat.emissiveIntensity = 1.2;
        const coreOrb = new THREE.Mesh(new THREE.SphereGeometry(0.9, 40, 40), coreMat);
        coreOrb.position.y = 4.6; 
        coreOrb.userData = coreData;
        scene.add(coreOrb);
        orbs.push(coreOrb);
        const coreGlow = new THREE.PointLight(0xFFD700, 3, 10);
        coreGlow.position.y = 4.6;
        scene.add(coreGlow);

        // =========================================
        // --- CHARACTERS (Updated Spacing) ---
        // =========================================
        const textureLoader = new THREE.TextureLoader();

        // >>> REPLACE WITH YOUR REAL IMAGE URLS <<<
        const leftCharUrl = 'https://i.postimg.cc/Sswcsnjf/joy-png.png';
        const rightCharUrl = 'https://placehold.co/400x600/4A90E2/ffffff?text=SADNESS+PNG';

        function addCharacterSprite(url, x, y, z, scaleX, scaleY) {
            textureLoader.load(url, (texture) => {
                const material = new THREE.SpriteMaterial({ map: texture, transparent: true });
                const sprite = new THREE.Sprite(material);
                sprite.scale.set(scaleX, scaleY, 1); 
                sprite.position.set(x, y, z);
                scene.add(sprite);
            });
        }

        // Moved characters further out and made them larger
        addCharacterSprite(leftCharUrl, -9, 1, -3, 6, 9);
        addCharacterSprite(rightCharUrl, 9, 0.5, -2, 6, 9);
        // =========================================


        // --- INTERACTION ---
        const raycaster = new THREE.Raycaster();
        const mouse = new THREE.Vector2();
        const infoPanel = document.getElementById('info-panel');
        const portrait = document.getElementById('char-portrait');
        let isPaused = false;

        window.addEventListener('click', (event) => {
            mouse.x = (event.clientX / window.innerWidth) * 2 - 1;
            mouse.y = -(event.clientY / window.innerHeight) * 2 + 1;
            raycaster.setFromCamera(mouse, camera);
            const intersects = raycaster.intersectObjects(orbs);
            if (intersects.length > 0) {
                showPanel(intersects[0].object.userData);
                isPaused = true; 
            } else {
                hidePanel();
                isPaused = false;
            }
        });

        function showPanel(data) {
            portrait.style.boxShadow = `0 0 40px #${data.color.toString(16)}`;
            if (data.image) {
                portrait.innerHTML = `<img src="${data.image}" class="character-img">`;
            } else {
                portrait.innerHTML = `<span style="font-size: 60px;">${data.emoji}</span>`;
            }
            infoPanel.querySelector('.panel-title').textContent = data.title;
            infoPanel.querySelector('.panel-title').style.color = '#' + data.color.toString(16);
            infoPanel.querySelector('.panel-text').textContent = data.text;
            infoPanel.classList.add('active');
        }
        function hidePanel() { infoPanel.classList.remove('active'); }
        document.querySelector('.close-btn').addEventListener('click', () => { hidePanel(); isPaused = false; });
        window.addEventListener('resize', () => {
            camera.aspect = window.innerWidth / window.innerHeight;
            camera.updateProjectionMatrix();
            renderer.setSize(window.innerWidth, window.innerHeight);
        });

        // --- ANIMATION ---
        function animate() {
            requestAnimationFrame(animate);
            if (!isPaused) carouselGroup.rotation.y += 0.004; 
            orbs.forEach((orb, i) => {
                const time = Date.now() * 0.001;
                if (orb !== coreOrb) orb.position.y = Math.sin(time + i) * 0.15;
                else orb.position.y = 4.6 + Math.sin(time * 0.5) * 0.2;
            });
            renderer.render(scene, camera);
        }
        animate();
    </script>
</body>
</html>